<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>à¹‚à¸®à¸ª</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  background:#000;
  color:#0f0;
  font-family:'Noto Sans Thai',sans-serif;
  padding:20px;
}
input,button{
  font-size:18px;
  padding:10px;
  margin:6px 0;
  width:100%;
  max-width:400px;
}
.player{
  border:1px solid #0f0;
  border-radius:10px;
  padding:10px;
  margin:6px 0;
}
</style>
</head>
<body>

<h2>ðŸ‘‘ à¹‚à¸®à¸ª (à¸žà¸£à¸°à¹€à¸ˆà¹‰à¸²)</h2>

<input id="room" placeholder="à¸£à¸«à¸±à¸ªà¸«à¹‰à¸­à¸‡ (à¹€à¸Šà¹ˆà¸™ 1234)">
<button onclick="createRoom()">à¸ªà¸£à¹‰à¸²à¸‡ / à¹€à¸‚à¹‰à¸²à¸«à¹‰à¸­à¸‡</button>

<h3>à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¹ƒà¸™à¸«à¹‰à¸­à¸‡</h3>
<div id="players">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™</div>

<script type="module">
import { db } from './firebase.js';
import { ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

window.createRoom = function(){
  const room = document.getElementById('room').value;
  if(!room) return;
  set(ref(db,'rooms/'+room+'/started'), false);
  onValue(ref(db,'rooms/'+room+'/players'), snap=>{
    const box=document.getElementById('players');
    box.innerHTML='';
    if(!snap.exists()){
      box.innerText='à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™';
      return;
    }
    Object.values(snap.val()).forEach(p=>{
      box.innerHTML+=`<div class="player">${p.name} | à¸šà¸—à¸šà¸²à¸—: ${p.role}</div>`;
    });
  });
}
</script>

</body>
</html>